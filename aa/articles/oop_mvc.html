<!DOCTYPE html>
<html lang="en">
<meta name="keywords" content="навык, яндекс, Алиса, php, mvc, ооп, навык Алисы, диалог, использование mvc ооп">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <h1>Навык Алисы – ассистента Яндекса на языке PHP с использованием ООП и MVC</h1>
    <p>Для платформы Яндекс.Диалоги я разработал навык «Монетизация компьютера» на языке программирования PHP. Программное обеспечение построено по правилам архитектуры проектирования паттерна MVC (Model-View-Controller). Файлы с данными и скриптами организованы и структурированы по принципам парадигмы проектирования – ООП (объектно-ориентированного проектирования).</p>
    <p>
        <a href="https://dialogs.yandex.ru/store/skills/2b0fdfd3-monetizaciya-komp-yute?utm_source=site&utm_medium=badge&utm_campaign=v1&utm_term=d1" target="_blank"><img alt="Алиса это умеет" src="https://dialogs.s3.yandex.net/badges/v1-term1.svg"/></a></p>
    <p>
        Эта программа для Алисы, является продуктом рефакторинга процедурного кода приложения Алисы
        <a href="https://xn--e1ai0c.xn--p1ai/article.php?id=20#earn">«Заработок в интернете - финансово-выгодный»</a>.</p>
    <div class="slide">
        <label for="slide1">
            Содержание статьи
        </label>
        <input type="checkbox" id="slide1"/>
        <nav class="content">
            <ul>
                <li><a href="#1">Навык Алисы</a>
                    <ul>
                        <li><a href="#1.1">Кто такая Алиса</a></li>
                        <li><a href="#1.2">Навык</a></li>
                        <li><a href="#1.3">Модерация навыка</a></li>
                        <li><a href="#1.4">Трудности функционирования на Windows</a></li>
                        <li><a href="#1.5">Проверка работоспособности навыка</a></li>
                    </ul>
                </li>
                <li><a href="#2">Архитектура приложения – шаблон MVC</a>
                    <ul>
                        <li><a href="#2.1">Модель</a></li>
                        <li><a href="#2.2">Контроллер</a></li>
                        <li><a href="#2.3">Представление</a></li>
                        <li><a href="#2.4">Точка входа</a></li>
                        <li><a href="#2.5">Особенности архитектуры</a></li>
                    </ul>
                </li>
                <li><a href="#3">Использование ООП</a>
                    <ul>
                        <li><a href="#3.1">Каталог «c»</a></li>
                        <li><a href="#3.2">Шаблоны каталога «v»</a></li>
                        <li><a href="#3.3">Файлы каталога «m»</a></li>
                        <li><a href="#3.4">ООП в цикле обработки запроса Яндекса к навыку</a></li>
                    </ul>
                </li>
                <li><a href="#4">Язык UML</a>
                    <ul>
                        <li><a href="#4.1">Условные обозначения UML</a></li>
                    </ul>
                </li>
                <li><a href="#5">Как использовать картинки в навыках Алисы</a>
                    <ul>
                        <li><a href="#5.1">Загрузка картинки на Яндекс.Диалоги cURL-ом</a></li>
                        <li><a href="#5.2">Как для загрузки картинки использовать cURL в Windows</a></li>
                        <li><a href="#5.3">Размеры картинок для навыка Алисы</a></li>
                    </ul>
                </li>
                <li><a href="#6">Исходники навыка Алисы с использованием ООП и MVC</a></li>
                <li><a href="#7">Запуск PhpStorm из меню OpenServer</a></li>
                <li><a href="#8">Поднять сервер Open Server из терминала PhpStorm</a>
                    <ul>
                        <li><a href="#8.1">Алгоритм действий по поднятию сервера из терминала</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </div>
    <p>На рисунке 1 представлена блок-схема алгоритма программы. Она поможет понять методы решения задачи по совместному применению ООП и MVC.</p>
    <figure class="col-xs-12">
        <a href="images/scheme-big.png" title="Увеличенное изображение принципа работы навыка Монетизация компьютера в этом же окне">
            <img src=" images/scheme.png" class="img-responsive" alt="Принцип работы навыка Монетизация компьютера">
        </a>
        <figcaption>Рис. 1. Навык монетизация компьютера</figcaption>
    </figure>
    <h2 id="1">Навык Алисы</h2>
        <h3 id="1.1">Кто такая Алиса</h3>
            <p>«Привет, <a href="https://xn--e1ai0c.xn--p1ai/article.php?id=20#20-assist">Алиса</a>», или «Слушай, Алиса» - такими речевыми командами вызывается голосовой помощник Яндекса. Обязательным условием выполнения команды является наличие установленного бота-ассистента на устройстве. Робот поддерживается телефонами с системами Андроид или iOS, компьютерами с Windows, другими гаджетами (например, Yandex.Станция, Irbis A, DEXP Smartbox).</p>
            <p>Для функционирования помощника на компьютере надо установить Яндекс.Браузер, или же скачать и развернуть отдельно приложение Алиса со страницы
                <span class="main-text">https://yandex.ru/support/browser/alice/install.html.</span>
                Проверено: в Windows 10 голосовой ассистент поисковика работает при открытом браузере edge. Поэтому не обязательно ставить яндексовский обозреватель интернета Яндекс.Браузер.</p>
<p>Без активированного браузера бот не работает.</p>
<p>На телефон приложение скачивается из магазина приложений.</p>
        <h3 id="1.2">Навык</h3>
            <p>Навык – диалог между одним пользователем интернета и другим, зарегистрированным пользователем российского поисковика Яндекс и разработавшим функционал общения. Диалог осуществляется на платформе Алисы - Яндекс.Диалоги. Общение происходит либо только голосом, либо только с помощью клавиатуры и экрана, либо и тем и другим одновременно.</p>
            <p>Разработчик, написав новое приложение, отправляет его на модерацию, после успешного прохождения её оно появляется в каталоге навыков и становится доступным всем пользователям. Приватные навыки отсутствуют в каталоге, но они все равно доступны всем желающим, которые знают, или сумеют подобрать их активационные имена.</p>
        <h3 id="1.3">Модерация навыка</h3>
            <p>Требования к приложению опубликованы в документации на странице
    <span class="main-text">https://tech.yandex.ru/dialogs/alice/doc/requirements-docpage/</span>.
    При первичном опубликовании проекта, модерацию пройти довольно легко. Думаю, такова политика Яндекс.Диалогов – принять как можно больше навыков от разработчиков, тем самым обучить нейросеть искусственного интеллекта Алисы.</p>
            <p>Опубликованный проект можно редактировать. Если в результате редактирования изменяются настройки, то программу придется отправить на модерацию повторно. А вот повторную модерацию пройти довольно трудно. Требования к настройкам ужесточаются. В процессе постоянной эволюции проекта они добавляются новыми правилами. Если при первичной модерации название навыка, или активационные имена легко прошли модерацию, то при повторной проверке зачастую они обрастают замечаниями от модераторов.</p>
            <p>Сейчас проверку производят специально обученные люди – модераторы. В дальнейшем это будут делать роботы.</p>
        <h3 id="1.4">Трудности функционирования на Windows</h3>
            <p>Сразу после запуска проекта у меня всё прекрасно работало на планшете с Windows 10. При обращении к приложению голосом или набором на клавиатуре получал ответ на экране планшета и голосом от динамиков. Чтобы Алиса ответила голосом, требуется настроить генерацию речи в формате ответа "tts"
    (<span class="main-text">https://tech.yandex.ru/dialogs/alice/doc/protocol-docpage/</span>).</p>
            <p>После очередного расширения функционала в октябре 2018 года, а именно возможности выбора  мужского голоса в ответах «Алисы», навыки перестали отвечать голосом на устройствах с Windows.</p>
            <p>Этот косяк разработчикам поисковика удалось исправить только к середине января 2019 года.</p>
        <h3 id="1.5">Проверка работоспособности навыка</h3>
            <p>Платформа диалогов ежеминутно проверяет готовность к ответу приложения, обращаясь к навыку командой "ping". Таким образом, проверяется, живо ли приложение.</p>
            <p>JSON обращения:</p>
            <p class="article_pre">
            <!--noindex-->
            "request": {
            "command": "ping",
            "original_utterance": "ping",
            …
            }
            <!--/noindex-->
            </p>
            <p>Кроме этого сервис приложения на сервере должен отвечать Диалогам в течение 1,5 секунды.</p>
            <p>При отрицательных результатах таких проверок навык деактивируется, автор разработки получает уведомление на почту. Если автор не принимает мер, то разработка удаляется из каталога.</p>
    <h2 id="2">Архитектура приложения – шаблон MVC</h2>
            <p>Шаблон проектирования – это пакет повторно используемых решений проблем. MVC – один из таких паттернов. Он позволяет разделить данные, представление и обработку действий пользователя на 3 отдельных модуля. Приложение навыка разделено на модули:</p>
        <ul>
            <li>MODEL (модель) – работа с базой данных,</li>
            <li>VIEW (представление) -  шаблоны вывода экрана,</li>
            <li>CONTROLLER (контроллер) - код взаимодействия с пользователем.</li>
        </ul>
                <p>Цели разбиения программы на отдельные модули:</p>
        <ul>
            <li>повторное использование кода,</li>
            <li>легкое ориентирование,</li>
            <li>возможность быстрого расширения и изменения.</li>
        </ul>
        <figure class="col-xs-12">
            <a href="images/template-big.png" title="Увеличенное изображение схемы MVC в этом же окне">
                <img src=" images/template.png" class="img-responsive" alt="Модель, представление, контроллер. Схема шаблона">
            </a>
            <figcaption>Рис. Схема MVC для навыка Алисы</figcaption>
        </figure>
        <h3 id="2.1">Модель</h3>
            <p>Модель читает необработанные данные после HTTP-заголовков из тела запроса, отправленного Диалогами, принимает закодированную в JSON строку и преобразует ее в переменную PHP. Здесь же происходит соединение с базой данных, получение данных из базы, запись в базу информации об ошибках посетителя, возврат результатов регулярных выражений.
«MODEL» является библиотекой методов для эффективной работы с базой данных.</p>
        <h3 id="2.2">Контроллер</h3>
            <p>В моем приложении Контроллер является обработчиком запросов. Модуль «CONTROLLER» получает от «MODEL» раскодированные элементы запроса Диалогов:
                <span class="main-text">"request" -  "command", "original_utterance", "markup", "payload"; "session" - "message_id",
        <!--noindex-->session_id, "user_id"<!--/noindex--></span>
        … И другие. В зависимости от вида запроса посетителя подготавливает ему ответ.</p>
            <p>Если для ответа требуются какие-то материалы из базы данных, они берутся из Модели.</p>
            <p>Нужное изображение (вид) выбирается из Представления (VIEW).</p>
            <p>Готовый ответ кодируется в JSON.</p>
        <h3 id="2.3">Представление</h3>
<p>«VIEW» содержит шаблоны пользовательского интерфейса.</p>
    <blockquote>
        <p>Пользовательский интерфейс (UI — англ. user interface) — интерфейс, обеспечивающий передачу информации между пользователем-человеком и программно-аппаратными компонентами компьютерной системы.</p>
        <cite><a href="https://ru.wikipedia.org/wiki/Интерфейс_пользователя">Википедия</a></cite>
    </blockquote>
<p>Представление состоит из нескольких пассивных (push) шаблонов, состоящих из сведений о структуре вида выводимого экрана устройства, голосовых ответов.</p>
        <h3 id="2.4">Точка входа</h3>
<p>Единая точка входа приложения – индексный файл <span class="main-text">index.php</span>. После команды посетителя 'запусти навык монетизация компьютера' платформа Яндекс.Диалоги обращается POST-запросом на Webhook URL приложения к индексному файлу JSON строкой.
Индексный файл подключает файлы модуля «CONTROLLER», создает требуемый контроллер, и управление передается ему.
CONTROLLER, прежде всего, обращается к Модели за данными. Готовит ответ. Затем получает нужный шаблон из Представления для визуального и звукового оформления ответа. Отправляет ответ.</p>
        <h3 id="2.5">Особенности архитектуры</h3>
<p>VIEW и MODEL ничего не знают друг о друге и не связаны между собой.  CONTROLLER берет данные из MODEL и подставляет в VIEW.</p>
<p>Шаблон MVC с «толстым» контроллером и «тонкими» моделью и представлением. Пользователь управляет приложением через контроллер. Он не может напрямую обращаться ни к «MODEL», ни к «VIEW» и видит экран, слышит голосовое сообщение, сформированные «CONTROLLER»-ом.</p>
<p>Применена трехуровневая архитектура «клиент–сервер–база данных», раскритикованная во многих источниках разработчиков. Но в данной разработке работает и легко изменяется.</p>
    <h2 id="3">Использование ООП</h2>
<p>Для объединения ООП с MVC в моем приложении навыка Алисы «Монетизация компьютера» выполнено следующее:</p>
    <ul>
        <li>Файлы Controller, Model, View разнесены в три отдельных каталога, соответственно – «c», «m», «v».</li>
        <li>Каждому выводу экрана (отдельному представлению) будет соответствовать свой controller.</li>
        <li>Каждый controller представлен отдельным файлом, в котором объявлен class, инкапсулирующий логику работы модуля Controller и предоставляющий методы для обработки запросов от Яндекс.Диалогов (пользователей). Классы построены в виде иерархии с наследованием.</li>
        <li>Модели системы реализованы в виде двух классов.</li>
        <li>Представления реализованы в виде классов–наследников от одного родительского class-а.</li>
        <li>Приложение навыка находится на сервере. Яндекс.Диалоги обмениваются с ним обращениями-ответами по протоколу HTTPS по методу webhook через специальную точку входа – файл <span class="main-text">index.php</span>.</li>
    </ul>
<p>В индексном файле в первых строках происходит подключение class-ов модуля Controller. Создается объект одного из class-ов. Дальше проверяется соответствие request пользователя свойствам этого объекта. В зависимости от совпадения request и определенного свойства создается нужный для данного request экземпляр контроллера. И с помощью полиморфизма дальнейшее управление приложением передается этому контроллеру.</p>
    <h3 id="3.1">Каталог «c»</h3>
<p>Как сообщалось <a href="#2.2">выше</a> каталог «c» содержит файлы модуля Controller.</p>
<p>Классы контроллеров служат для обеспечения обработки request пользователей, поступающих через платформу – получения параметров входных запросов и подготовки результирующей JSON строки. Для выполнения этой работы они задействуют классы модели и представления.</p>
    <figure class="col-xs-12">
        <a href="images/cont-big.png" title="Увеличенное изображение иерархии классов модуля controller в этом же окне">
            <img src=" images/cont.png" class="img-responsive" alt="Иерархия классов модуля controller">
        </a>
        <figcaption>Рис. Диаграмма иерархии классов модуля CONTROLLER</figcaption>
    </figure>
<p>Данная диаграмма выполнена на языке UML. Об условных обозначениях описательного языка <a href="#4">UML здесь</a>.</p>
<p>Родительский class Controller инкапсулирует логику для любого контроллера и содержит общие элементы модуля. В частности - метод <span class="main-text">Request()</span>, ответственный за обработку request от ассистента Яндекса и формирование обратно ответа. В его теле абстрактные методы <span class="main-text">Input(</span>) – обработка запроса и <span class="main-text">Output()</span> – генерация ответа. Эти функции переопределяются в дочерних классах.</p>
<p>Есть еще вспомогательный метод <span class="main-text">IsButtons($buttons)</span> проверяющий, что переменная buttons является двумерным массивом.</p>
<p>Базовый controller <span class="main-text">C-Base</span> отвечает за кодирование ответа в строку JSON, в нем определены базовые для навыка Алисы переменные PHP.</p>
<p><span class="main-text">C_View, C_Help, C_Card, C_Gallery</span> – контроллеры конкретных ответов пользователю голосового ассистента во время диалога с навыком. В них переопределяются методы <span class="main-text">Input()</span> и <span class="main-text">Output()</span>, но управление передается <span class="main-text">C-Base</span>. Функция <span class="main-text">Input()</span> сначала вызывает родительский метод, затем в зависимости от полученного request пользователя инициализирует нужные переменные PHP.  Функция <span class="main-text">Output()</span> начинается с подстановки этих подготовленных переменных в конкретный, закрепленный для данного контроллера, шаблон модуля «VIEW». После чего вызывается родительский метод <span class="main-text">Output()</span>.</p>
        <h3 id="3.2">Шаблоны каталога «v»</h3>
    <figure class="col-xs-12">
        <a href="images/view-big.png" title="Увеличенное изображение иерархии классов модуля view в этом же окне">
            <img src=" images/view.png" class="img-responsive" alt="Иерархия классов модуля view">
        </a>
        <figcaption>Рис. Диаграмма иерархии классов модуля VIEW</figcaption>
    </figure>
        <p>Модуль «VIEW» содержит родительский class и его классы-наследники. Родительский class - это  шаблон, в котором  объявленная переменная PHP находится в конструкторе и является ассоциативным массивом. Ключи – это имена полей объекта JSON в запросе от Яндекс.Диалогов. Значения – это переменные, значения которых находятся в базовом контроллере <span class="main-text">C-Base</span>.</p>
        <p>Дочерние классы – это такие же шаблоны. Каждый дочерний class предназначен для конкретного controller-а: <span class="main-text">Template_resp</span> – для <span class="main-text">C_View</span> и <span class="main-text">C_Help, Template_card</span> – для <span class="main-text">C_Card, Template_gallery</span> – для <span class="main-text">C_Gallery</span>.</p>
        <h3 id="3.3">Файлы каталога «m»</h3>
        <p>Модель состоит из класса соединения с базой данных и класса с функциями обработки запроса, получения сведений из базы данных, ввода ошибок пользователей, возврата результатов регулярных выражений.</p>
        <h3 id="3.4">ООП в цикле обработки запроса Яндекса к навыку</h3>
        <p>Обработка запроса начинается в файле index.php. В этом документе приложения происходит выбор нужного контроллера. Выбранный controller  вызывает метод Request(). С помощью этого метода запускаются 2 этапа обработки запроса:</p>
            <ul>
                <li>адресование к модели для получения входных данных (<span class="main-text">Input()</span>);</li>
                <li>генерация JSON (<span class="main-text">Output()</span>).</li>
            </ul>
        <p>Первый этап цикла происходит в такой последовательности:</p>
            <ul>
                <li>обращение к базовому controller-у (<span class="main-text">C_Base</span>);</li>
                <li>управление конкретным контроллером <span class="main-text">(C_View</span>, или <span class="main-text">C_Help</span>, или<span class="main-text"> C_Card</span>, или <span class="main-text">C_Gallery</span>);</li>
            </ul>
        <p>Второй этап – в обратной последовательности:</p>
            <ul>
                <li>конкретный controller (<span class="main-text">C_View</span>, или <span class="main-text">C_Help</span>, или <span class="main-text">C_Card</span>, или <span class="main-text">C_Gallery)</span>;</li>
                <li>возврат к базовому controller-у (<span class="main-text">C_Base</span>).</li>
            </ul>
<p>На UML-диаграмме последовательностей обработка запроса выглядит так, как показано на рисунке Цикл обработки request Яндекс.Диалогов к навыку.</p>
    <figure class="col-xs-12">
        <a href="images/cycle-big.png" title="Увеличенное изображение цикла обработки request Яндекс.Диалогов к навыку в этом же окне">
            <img src=" images/cycle.png" class="img-responsive" alt="Обработка запроса Яндекс.Диалогов приложением Монетизация компьюера">
        </a>
        <figcaption>Рис. Цикл обработки request Яндекс.Диалогов к навыку</figcaption>
    </figure>
    <h2 id="4">Язык UML</h2>
<p>Аббревиатура UML декодируется как Unified  Modeling Language и переводится – унифицированный язык моделирования. Язык UML применяется в программировании для работы с объектно-ориентированными технологиями. Этот визуальный язык использует графические и буквенные элементы для создания моделей программ.</p>
<p>Диаграмма классов (Class Diagrams) используется на этапе проектирования для представления взаимодействия отдельных классов системы.</p>
<p>Диаграмма последовательностей (на английском языке - Sequence Diagram) – разновидность диаграммы взаимодействий. В отличие от диаграммы классов, отражающей статическое отношение классов, рассказывает о взаимодействии в течение времени жизни сущностей и действующих лиц. Такую диаграмму необходимо изучать сверху вниз.</p>
        <h3 id="4.1">Условные обозначения UML</h3>
<p>Прямоугольник соответствует классу.</p>
<p>Стрелка от прямоугольника показывает отношения наследования и обозначает, что другие классы являются его потомками. Направление стрелки указывает на родителя.</p>
<p>В прямоугольнике класса описываются имя, методы, члены, свойства class-а.</p>
<p><strong>Имя</strong> class-а выделено полужирным шрифтом в верхней части прямоугольника. Дополнительное выделение имени class-а курсивом указывает, что этот class является <strong><span class="main-text">абстрактным</span></strong>, то есть не имеет экземпляров, применяется только для определения интерфейса своих классов-потомков.</p>
<p>Прямым шрифтом – методы. Курсивом – <span class="main-text">свойства</span> class-а. После двоеточия «:» - тип.</p>
<p>Условные обозначения UML для описания уровня доступа:</p>
    <ul>
        <li>+   (плюс) - public (открытый),</li>
        <li># (номер) – protected (защищенный),</li>
        <li>- (минус) – private (закрытый).</li>
    </ul>
<p>Вертикальная прерывистая линия – течение времени жизни.
    </p>
    <h2 id="5">Как использовать картинки в навыках Алисы</h2>
    <p>
    Платформа Диалогов предоставила возможность использовать иллюстрации в навыках. Иллюстрации можно использовать в двух вариантах:</p>
одиночное изображение,
изображения в списке ответов.
    <p>Изображение требуется загрузить на сервис голосового ассистента и применять выданные идентификатор и URL изображения в разработке.</p>
    <p>Для различных вариантов загрузки выделены разные API (на английском языке - Application Programming Interface). В частности, чтобы залить картинку из интернета, позволено воспользоваться cURL следующего API:
    </p>
    <p class="article_pre">
        <!--noindex-->
        curl \
        -H 'Authorization: OAuth &lt;OAuth-токен&gt;' \
        -H 'Content-Type: application/json' \
        -X POST \
        -d '{ "url": "&lt;адрес изображения&gt;" }' \
        'https://dialogs.yandex.net/api/v1/skills/&lt;идентификатор навыка&gt;/images'
        <!--/noindex-->
    </p>
    <p>Такой код предлагается платформой поисковика. Для конкретной реализации он нуждается в редактировании. Об этом ниже в статье.</p>
        <h3 id="5.1">Загрузка картинки на Яндекс.Диалоги cURL-ом</h3>
            <p>cURL – программа для взаимодействия с серверами, переноса данных, обмена информацией между сайтами. Если ее нет на вашем компьютере, то придется скачать архив, подходящей версии для используемой операционной системы с официального сайта
                <span class="main-text">https://curl.haxx.se/download.html</span>.
                Рекомендую воспользоваться опцией «curl Download Wizard». В Интернете легко найти мастеров (например, ресурс
                <span class="main-text">https://o7planning.org/ru/11617/installing-curl-on-windows</span>) определения нужной версии для загрузки этой утилиты. Самому сложно в этом разобраться, т.к. утилита кроссплатформенная с богатым выбором версий.</p>
            <p>Программа не требует установки, надо просто распаковать папку в любое место. Вес программы небольшой: например, curl-7.62.0-win32-mingw занимает 6,36 МБ.</p>
            <p>Для того чтобы загрузить иллюстрацию по API, скачивать libcurl - многопротокольную библиотеку передачи файлов не требуется.</p>
        <h3 id="5.2">Как для загрузки картинки использовать cURL в Windows</h3>
            <p>Я использовал cURL в командной строке с правами администратора из-под Windows 10.</p>
            <p>Предоставленный Яндексом API для загрузки картинок вызвал у меня много трудностей. Прежде всего, пришлось в аргументах коротких опций исключить одинарные кавычки, т.к. Windows их не поддерживает. При их использовании ответы курла выкидывали множество ошибок. Заменил их двойными кавычками.</p>
            <p>Там где короткая опция «-d» записан аргумент JSON. Этот аргумент сначала я писал вообще без кавычек. Так не работало. Затем в двойных. Так рекомендовано в документации утилиты: «Чтобы сама строка содержала двойные кавычки, что обычно встречается, когда вы, например, хотите отправить строку JSON на сервер, вам может понадобиться использовать одинарные кавычки (кроме Windows, где одиночные кавычки работают не так), отправьте строку JSON { "name": "Darth" }.» Согласно такой рекомендации заключил аргумент в двойные знаки препинания. В результате курл снова сообщил об ошибках.</p>
            <figure class="col-xs-12">
                <img src=" images/curl.jpg" class="img-responsive" alt="Курл об ошибках применения двойных кавычек">
                <figcaption>Рис. Курл сообщил об ошибках в использовании двойных кавычек для аргумента.</figcaption>
            </figure>
            <p>Перепробовал множество вариантов, пока не получил подсказку Alexey Kaliberda из сообщества разработчиков Яндекс.Диалогов в Telegram. Надо этот аргумент заключить в двойные кавычки, а элементы – в экранированные обратным слешем \ двойные кавычки. Адрес Яндекс.Диалогов с идентификатором навыка – вообще без кавычек.</p>
            <figure class="col-xs-12">
                <img src=" images/cur.jpg" class="img-responsive" alt="Курл принял запрос без сообщения об ошибках">
                <figcaption>Рис. Правильно оформленный курл для загрузки иллюстрации на Яндекс.Диалоги</figcaption>
            </figure>
            <p>В итоге правильный запрос для загрузки иллюстрации в терминале из-под Windows в следующей редакции:</p>
            <p class="article_pre">
            <!--noindex-->
            curl -H "Authorization: OAuth &lt;OAuth-токен&gt;" -H "Content-Type: application/json" -X POST -d "{ \"url\": \"&lt;адрес изображения&gt;\" }" https://dialogs.yandex.net/api/v1/skills/&lt;идентификатор навыка&gt;/images
            <!--/noindex-->
            </p>
            <p>В ответ на такой код в запросе Диалоги присылают идентификатор и адрес изображения для их использования в реализации программы.</p>
            <h3 id="5.3">Размеры картинок для навыка Алисы</h3>
                <p>В документации Яндекса
                    (<span class="main-text">https://tech.yandex.ru/dialogs/alice/doc/resource-upload-docpage/</span>) о размерах иллюстраций ничего не сообщается. Но есть рекомендации об их использовании в видео на 3:13 и 4:16 минутах Школы Алисы про выбор компонента для дизайна навыка
                    (<span class="main-text">https://www.youtube.com/watch?v=YC7R0RCZ7gU&list=PLJ0wXoH5OsouSN8zS48jo7ATkQONYhWVm&index=2</span>).</p>
                <p>Необходимо следовать этим рекомендациям, чтобы изображения отображались на экране, так как задумано, а не были обрезаны по усмотрению Диалогов.</p>
                <p>В моем приложении навыка Алисы на языке PHP за вывод картинок ответственны шаблоны представления <span class="main-text">Template_card</span> – для показа одиночной картинки (тип карточки <span class="main-text">BigImage</span>) и <span class="main-text">Template_gallery</span> – для показа в виде галереи (тип карточки <span class="main-text">ItemsList</span>). Это я вернулся к теме моего применения ООП для голосового ассистента.</p>
        <h2 id="6">Исходники навыка Алисы с использованием ООП и MVC</h2>
                <p>Если кого-то заинтересовал мой опыт реализации навыка с применением ООП и MVC на языке PHP, то можно ознакомиться с
                    <a href="https://payment.dawork.ru/" target="_blank">исходниками кода</a>.</p>
                <p>В моей программе для голосового помощника использованы материалы и рекомендации о совместном использовании принципов MVC и ООП на языке программирования PHP из книги
                    <!--noindex-->Дмитрия Ляпина, Александра Никитина
                    <a href="https://xn--e1ai0c.xn--p1ai/article.php?id=13">«PHP – это просто. Начинаем с видеоуроков»</a><!--/noindex-->.
                </p>
                <p>Дальнейшая информация не относится конкретно к данной теме статьи про использование MVC и ООП в навыке Алисы, а имеет общее применение в программировании. А расположил я эти разделы здесь, так как нижеописанными знаниями воспользовался при изготовлении приложения для Яндекса – навыка Алисы.</p>
        <h2 id="7">Запуск PhpStorm из меню OpenServer</h2>
                <p>Вначале небольшое вступление об IDE PhpStorm. В интегрированной среде разработки (Integrated Development Environment) PhpStorm удобно писать код PHP. Сегодня это лучший продукт для редактирования кода.</p>
                <p>Локальным сервером Open Server пользуюсь уже давно, после древнего Денвера. Считаю, что это удобная площадка для разработчика.</p>
                <p>Иногда возникает потребность запуска IDE из меню OpenServer. Чтобы это делать, надо создать в настройках локального сервера закладку на PhpStorm и тогда можно запускать IDE через эту закладку.</p>
                <ul>
                    <li>Клик правой кнопкой мыши на значке «Настройки» OpenServer-а.</li>
                    <li>Вверху окна «Настройки» кликнуть «Закладки».</li>
                    <li>Назначить имя - например, PhpStorm, категория – можно IDE, в поле Выполнить записать путь до файла PhpStorm.exe – может быть <!-- noindex-->c:\program files\jetbrains\phpstorm 9.0.2\bin\PhpStorm.exe<!--/ noindex --></li>
                    <li>Нажать кнопки Добавить – Сохранить.</li>
                </ul>
                <p>Теперь IDE можно запустить через закладку в OpenServer.</p>
        <h2 id="8">Поднять сервер Open Server из терминала PhpStorm</h2>
                <p>Не надо запускать терминал командной строки в операционной системе, он уже имеется в редакторе кода. В терминале (командная строка), который уже встроен в редактор кода, можно вводить команды и проверять их выполнение. Результаты выполненных команд отображаются в самом терминале и в браузере.</p>
                <h3 id="8.1">Алгоритм действий по поднятию сервера из терминала</h3>
                <p>Запустить на своей машине Open Server (в трее будет зеленый флажок) и перейти в переменные среды следующим образом.</p>
                <ul>
                    <li>В Windows 10 в строке поиска забить «изменение системных переменных среды».</li>
                    <li>Откроется найденный вариант Панели управления «Изменение системных переменных среды». Кликнуть.</li>
                    <li>Выскочит окно «Свойства системы».</li>
                    <li>На вкладке «Дополнительно» – внизу окна «Переменные среды…» - переход на строку Path (выделить ее) – Изменить.</li>
                    <li>В окне «Изменить переменную среды» создать строку PHP 7 или другую версию, например
                        <!-- noindex -->D:\OpenServer\modules\php\PHP-5.4<!--/ noindex -->,
                        т.е. директорию до php Open Server-а.</li>
                    <li>Далее Ok Ok Ok.</li>
                    <li>Если Windows 7, или XP, то после этих манипуляций перезагрузиться, чтобы обновились переменные среды. Если восьмерка, или десятка, то просто закрыть-открыть консоль.</li>
                </ul>
                <p>В PhpStorm включить консоль – внизу кнопка “Terminal”. После этих действий в консоли можно будет выполнить команду <span class="main-text">php –v</span>. Команду надо ввести, а не копипастить. В результате выведется версия php. Значит все в порядке и можно выполнять команду на поднятие сервера.</p>
                <figure class="col-xs-12">
                    <img src=" images/terminal.gif" class="img-responsive" alt="Запись в терминале о версии PHP ">
                    <figcaption>Рис. Успешная установка php</figcaption>
                </figure>
                <p>Перейти в нужную директорию (левой кнопкой мыши кликнуть директорию и зажатой кнопкой перетащить ее в терминал). В консоли написать строку:
                    <span class="main-text">php -S localhost:8080</span>.
                    Выполнить, нажав Enter.</p>
                <p>И вот сервер Open Server поднялся. В консоли скопировать строку сервера
                    <span class="main-text">http://localhost:8080</span>
                    и открыть его в браузере. К получившейся адресной строке можно добавлять имена файлов. Например: <span class="main-text">http://localhost:8080/controller.php</span>.</p>
                <p>Всё. Результаты работы теперь можно контролировать в браузере и в терминале PhpStorm.
                </p>
</body>
</html>